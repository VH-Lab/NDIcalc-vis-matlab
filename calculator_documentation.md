# Calculator Documentation

This document describes the structure and content of the documentation files required for each calculator class in the `ndi.calc.vis` package.

## File Structure

For each calculator class `ndi.calc.vis.CALCULATOR_NAME.m`, there must be a corresponding `docs` directory at `+ndi/+calc/+vis/docs/`. Inside this directory, three text files are required for each calculator:

1.  `CALCULATOR_NAME.docs.general.txt`
2.  `CALCULATOR_NAME.docs.output.txt`
3.  `CALCULATOR_NAME.docs.searching.txt`

## 1. General Documentation (`*.docs.general.txt`)

This file should provide a high-level overview of what the calculator computes.

**Content Instructions:**
*   **Description:** Briefly explain the purpose of the calculator. What scientific or data analysis problem does it solve?
*   **Methodology:** Mention the algorithms or mathematical models used.
*   **References:** Cite relevant scientific papers or standard methods (e.g., "Naka and Rushton 1966", "Mazurek et al. 2014").
*   **Formulas:** Include the key mathematical formulas for any fits performed.
    *   Define the equation (e.g., `R(c) = Rm*c/(C50+c)`).
    *   List and define the parameters used in the equation.

## 2. Output Documentation (`*.docs.output.txt`)

This file details the structure of the output document generated by the calculator.

**Content Instructions:**
*   **Document Type:** State the specific NDI document type produced (e.g., `'ndi_calculation_contrasttuning'`).
*   **Superclasses:** List any superclasses the output document inherits from (e.g., `ndi_document`, `ndi_document_app`).
*   **Fields Description:** Systematically list and describe the fields in the output document structure. Organize them by top-level categories such as:
    *   `properties`: Basic metadata like units or response type.
    *   `tuning_curve`: The core data vectors (independent variable, mean response, error bars, etc.).
    *   `significance`: Statistical test results (p-values).
    *   `fitless`: Metrics calculated without a model fit (e.g., interpolated values, circular variance).
    *   `fit`: Parameters and quality metrics for any model fits performed.
*   **Field Details:** For each field, provide a clear description of what it represents, including units or dimensions where applicable (e.g., "The set of contrast values (vector, 1 x number of contrasts shown)").

## 3. Searching Documentation (`*.docs.searching.txt`)

This file explains how the calculator identifies the input documents it needs to process.

**Content Instructions:**
*   **Default Search Criteria:** Describe the default query parameters.
    *   What input document type is it looking for (e.g., `stimulus_tuningcurve`)?
    *   What specific fields or labels identify the correct input (e.g., `independent_variable_label` must be 'contrast')?
*   **Modifying the Search:** Explain how a user can customize the search query.
*   **Example:** Provide a code snippet showing how to restrict the search, for example, to a specific element ID.

```matlab
% Example: Only perform the operation on the element called myelement
DQ = c.default_search_for_input_parameters();
DQ.query = DQ.query & ndi.query('','depends_on','element_id',myelement);
c.run('Replace',DQ);
```
